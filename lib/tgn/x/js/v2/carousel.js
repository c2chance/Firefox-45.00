(function($){"use strict";function setPositions($el){var settings=$el.data("carousel"),$inner=$el.data("$carouselInner"),$slides,$lastSlide,lastSlideIndex,carouselWidth,maxLeftPosition;settings.infinite&&$el.data("$carouselSlides",$el.find(".carouselSlide"));$slides=$el.data("$carouselSlides");$lastSlide=$slides.eq(-1);lastSlideIndex=$lastSlide.index();carouselWidth=$lastSlide.position().left+$lastSlide.outerWidth(!0);carouselWidth<=$el.outerWidth(!1)?$slides.data("carousel-position",0):settings.fullWidth?(maxLeftPosition=-$lastSlide.position().left-parseInt($lastSlide.css("margin-left"),10),$slides.each(function(){$(this).data("carousel-position",(-$(this).position().left-parseInt($(this).css("margin-left"),10))/$(this).outerWidth(!1)*100+"%")})):(maxLeftPosition=$inner.width()-carouselWidth,$slides.each(function(){return $(this).data("carousel-position",-$(this).position().left-parseInt($(this).css("margin-left"),10)),$(this).data("carousel-position")<=maxLeftPosition?($(this).data("carousel-position",maxLeftPosition),$lastSlide=$(this),lastSlideIndex=$(this).index(),!1):void 0}));settings.carouselHeight!=="auto"&&settings.carouselHeight!=="varied"&&$slides.css("min-height",settings.carouselHeight);$el.data("$carouselGoToSlideBtns")&&$el.data("$carouselGoToSlideBtns").each(function(){$(this).attr("data-carousel-slide")>lastSlideIndex?$(this).fadeOut():$(this).fadeIn()});$el.data("$lastSlide",$lastSlide).data("carousel-stage-width",carouselWidth)}function markCarousel($el,oldSlideIndex,newSlideIndex){var settings=$el.data("carousel"),$slides=$el.data("$carouselSlides"),$lastSlide=$el.data("$lastSlide"),lastSlideIndex=$lastSlide.index(),elMatchingIdAttr='[data-carousel-id="'+$el.attr("id")+'"]',$nextBtns,$previousBtns,$firstBtns,$lastBtns;$el.data("$currentSlide",$slides.eq(newSlideIndex));$slides.eq(oldSlideIndex).removeClass(settings.activeSlideClass).end().eq(newSlideIndex).addClass(settings.activeSlideClass);$el.removeClass("carouselAnimating");settings.continuous||settings.infinite||($nextBtns=$(elMatchingIdAttr+'[data-carousel-slide="next"]'),$previousBtns=$(elMatchingIdAttr+'[data-carousel-slide="previous"]'),$firstBtns=$(elMatchingIdAttr+'[data-carousel-slide="first"]'),$lastBtns=$(elMatchingIdAttr+'[data-carousel-slide="last"]'),$el.data("carousel-stage-width")<=$el.outerWidth(!1)?$nextBtns.add($previousBtns).add($firstBtns).add($lastBtns).addClass(settings.disabledBtnClass).attr("disabled","disabled"):newSlideIndex===0?($previousBtns.add($firstBtns).addClass(settings.disabledBtnClass).attr("disabled","disabled"),$nextBtns.add($lastBtns).removeClass(settings.disabledBtnClass).removeAttr("disabled")):newSlideIndex===lastSlideIndex?($nextBtns.add($lastBtns).addClass(settings.disabledBtnClass).attr("disabled","disabled"),$previousBtns.add($firstBtns).removeClass(settings.disabledBtnClass).removeAttr("disabled")):$nextBtns.add($previousBtns).add($firstBtns).add($lastBtns).removeClass(settings.disabledBtnClass).removeAttr("disabled"));settings.infinite||($(elMatchingIdAttr+'[data-carousel-slide="'+oldSlideIndex+'"]').removeClass(settings.activeBtnClass),$(elMatchingIdAttr+'[data-carousel-slide="'+newSlideIndex+'"]').addClass(settings.activeBtnClass))}function goToSlide($el,newSlideIndex,ignoreCallbacks){var settings=$el.data("carousel"),$inner=$el.data("$carouselInner"),$slides=$el.data("$carouselSlides"),$lastSlide=$el.data("$lastSlide"),lastSlideIndex=$lastSlide.index(),$currentSlide=$el.data("$currentSlide"),currentSlideIndex=$currentSlide.index(),currentSlidePosition=$currentSlide.data("carousel-position"),elWidth=$el.width(),leftPosition=0,positionOptions={},slidesToScroll=settings.slidesPerScroll==="page"?$slides.length:settings.slidesPerScroll,i;if($.type(newSlideIndex)==="string")if(newSlideIndex==="next"){if(settings.continuous&&currentSlideIndex>=lastSlideIndex)newSlideIndex=0;else if(newSlideIndex=currentSlideIndex+slidesToScroll,slidesToScroll>1)for(i=currentSlideIndex+1;i<=currentSlideIndex+slidesToScroll;){if(Math.abs($slides.eq(i).data("carousel-position"))+$slides.eq(i).width()-Math.abs(currentSlidePosition)>elWidth){newSlideIndex=Math.max(i,currentSlideIndex+1);break}i+=1}}else if(newSlideIndex==="previous"){if(settings.continuous&&currentSlideIndex<=0)newSlideIndex=lastSlideIndex;else if(newSlideIndex=currentSlideIndex-slidesToScroll,slidesToScroll>1)for(i=currentSlideIndex-1;i>=currentSlideIndex-slidesToScroll;){if(Math.abs(currentSlidePosition)-parseInt($slides.eq(currentSlideIndex-1).css("margin-right"),10)-parseInt($currentSlide.css("margin-left"),10)-Math.abs($slides.eq(i).data("carousel-position"))>elWidth){newSlideIndex=Math.min(i+1,currentSlideIndex-1);break}i-=1}}else newSlideIndex==="last"?newSlideIndex=lastSlideIndex:newSlideIndex==="first"&&(newSlideIndex=0);if(newSlideIndex=parseInt(newSlideIndex,10),newSlideIndex<0?newSlideIndex=0:newSlideIndex>lastSlideIndex&&(newSlideIndex=lastSlideIndex),!ignoreCallbacks){if(settings.onSlideEnd!==!1)settings.onSlideEnd(currentSlideIndex,$currentSlide);if(settings.onSlideStart!==!1)settings.onSlideStart(newSlideIndex,$slides.eq(newSlideIndex));if(settings.onSlideChange!==!1)settings.onSlideChange(newSlideIndex,$slides.eq(newSlideIndex),currentSlideIndex,$currentSlide)}if(settings.onSlideLoad!==!1&&!$slides.eq(newSlideIndex).data("carousel-loaded")){settings.onSlideLoad(newSlideIndex,$slides.eq(newSlideIndex));$slides.eq(newSlideIndex).data("carousel-loaded",!0)}leftPosition=$slides.eq(newSlideIndex).data("carousel-position");$el.addClass("carouselAnimating");settings.carouselHeight==="varied"&&(positionOptions.height=$slides.eq(newSlideIndex).outerHeight(!0));$inner.css(buildAnimation(leftPosition,positionOptions,settings));ignoreCallbacks||settings.onAfterSlideChange===!1||(setTimeout(function(){settings.infinite&&($el.data("$currentSlide",$slides.eq(settings.firstSlide-1)),$inner.css(buildAnimation($slides.eq(settings.firstSlide-1).data("carousel-position"),{"-webkit-transition":"none",transition:"none"},settings)));settings.onAfterSlideChange(newSlideIndex,$slides.eq(newSlideIndex),currentSlideIndex,$currentSlide)},settings.scrollTime),settings.infinite&&$inner.css({"-webkit-transition":settings.innerTransition,transition:settings.innerTransition}));markCarousel($el,currentSlideIndex,newSlideIndex)}function buildAnimation(leftPosition,cssObject,settings){return settings.useTransforms?cssObject.transform="translate3d("+leftPosition+", 0, 0)":cssObject.left=leftPosition,cssObject}function getLeftPosition($el,settings){var matrix,x;return settings.useTransforms?(matrix=window.getComputedStyle($el.data("$carouselInner")[0],null),matrix=matrix.transform.split(")")[0].split(", "),x=parseInt(matrix[12]||matrix[4],10)):x=parseInt($el.data("$carouselInner").css("left"),10),x}function playAutoscroll($el){var settings=$el.data("carousel"),$pausePlayBtns=$("."+settings.pausePlayBtnClass+'[data-carousel-id="'+$el.attr("id")+'"]');$el.removeClass("carouselPaused").addClass("carouselPlaying");$pausePlayBtns.removeClass("iconPlay").addClass("iconPause");$el.data("carousel-timer",setInterval(function(){goToSlide($el,"next")},settings.autoscroll+settings.scrollTime))}function pauseAutoscroll($el,forceStop){var settings=$el.data("carousel"),$pausePlayBtns=$("."+settings.pausePlayBtnClass+'[data-carousel-id="'+$el.attr("id")+'"]');$el.addClass("carouselPaused").removeClass("carouselPlaying");clearInterval($el.data("carousel-timer"));forceStop&&($el.data("carousel-timer",null).removeClass("carouselPaused carouselPlaying"),$pausePlayBtns.removeClass("iconPause").addClass("iconPlay"))}function addControlsHtml($el){var settings=$el.data("carousel"),elId=$el.attr("id"),lastSlideIndex=$el.data("$carouselSlides").eq(-1).index(),html="",$prevNextBtns,$pagination,$pausePlayBtns,$controlsWrap,i=0;if($el.find(".carouselControlsDefault").length||$('<menu class="carouselControlsDefault"><\/menu>').appendTo($el),$controlsWrap=$el.find(".carouselControlsDefault"),settings.showPausePlayBtns&&!$el.data("carousel-pause-play-loaded")&&($pausePlayBtns=$('<button class="'+settings.pausePlayBtnClass+' ancBtn icon iconPause silver sml" type="button" data-carousel-id="'+elId+'"><\/button>'),$pausePlayBtns.appendTo($controlsWrap),$el.data("carousel-pause-play-loaded",$pausePlayBtns)),settings.pagination&&!$el.data("carousel-pagination-loaded")){for($controlsWrap.addClass("carouselPagination carouselPagination"+settings.pagination.charAt(0).toUpperCase()+settings.pagination.slice(1)),i;i<=lastSlideIndex;i+=1)html+='<button class="ancBtn silver sml" type="button" data-carousel-slide="'+i+'" data-carousel-id="'+elId+'">',settings.pagination==="numbers"&&(html+=i+1),html+="<\/button>";$pagination=$(html);$pagination.appendTo($controlsWrap);$el.data("carousel-pagination-loaded",$pagination)}settings.showPrevNextBtns&&!$el.data("carousel-prev-next-loaded")&&($prevNextBtns=$('<button class="carouselPreviousBtn icon iconArrowLeft" type="button" data-carousel-slide="previous" data-carousel-id="'+elId+'"><\/button><button class="carouselNextBtn icon iconArrowRight" type="button" data-carousel-slide="next" data-carousel-id="'+elId+'"><\/button>'),$prevNextBtns.appendTo($controlsWrap),$controlsWrap.find(".carouselPreviousBtn").prependTo($controlsWrap),$el.data("carousel-prev-next-loaded",$prevNextBtns))}function getClosestSlide($el,fromWhatLeftPosition){var settings=$el.data("carousel"),$slides=$el.data("$carouselSlides"),$slide,closestSlidePosition=null,closestSlideIndex=null;return settings.fullWidth?!1:(fromWhatLeftPosition||(fromWhatLeftPosition=getLeftPosition($el,settings)),$.each($slides,function(slideIndex){$slide=$(this);(closestSlidePosition===null||Math.abs($slide.data("carousel-position")-fromWhatLeftPosition)<Math.abs(closestSlidePosition-fromWhatLeftPosition))&&(closestSlidePosition=$slide.data("carousel-position"),closestSlideIndex=slideIndex)}),closestSlideIndex)}function addTouchEvents($el){var settings=$el.data("carousel"),$inner=$el.data("$carouselInner"),$currentSlide,innerLeftPos,minDistance=15,startX=0,startY=0,change=0,currentX=0,currentY=0,currentXDistance,currentYDistance,isScrolling,newSlideIndex,touchStartTime,touchEndTime,touchSpeed;$inner.on("touchstart.carousel",function(e){$inner.css({"-webkit-transition":"none",transition:"none"});touchStartTime=(new Date).getTime();isScrolling=undefined;currentX=0;currentY=0;currentXDistance=0;currentYDistance=0;startX=e.originalEvent.touches?e.originalEvent.touches[0].pageX:e.pageX;startY=e.originalEvent.touches?e.originalEvent.touches[0].pageY:e.pageY;$currentSlide=$el.data("$currentSlide");innerLeftPos=settings.showPreviews?-$currentSlide.position().left-parseInt($currentSlide.css("margin-left"),10):settings.fullWidth?-$inner.width()*$currentSlide.index():getLeftPosition($el,settings)}).on("touchmove.carousel",function(e){currentX=e.originalEvent.touches?e.originalEvent.touches[0].pageX:e.pageX;currentY=e.originalEvent.touches?e.originalEvent.touches[0].pageY:e.pageY;change=currentX-startX;currentXDistance=startX===0?0:Math.abs(change);currentYDistance=startY===0?0:Math.abs(currentY-startY);$inner.css(buildAnimation(innerLeftPos+change+"px",{},settings));typeof isScrolling=="undefined"&&(isScrolling=!!(isScrolling||currentXDistance<currentYDistance));isScrolling||(e.preventDefault(),settings.autoscroll&&currentXDistance>minDistance&&pauseAutoscroll($el,!0))}).on("touchend.carousel",function(){if($inner.css({"-webkit-transition":settings.innerTransition,transition:settings.innerTransition}),!isScrolling&&currentXDistance>minDistance)if(touchEndTime=(new Date).getTime(),touchSpeed=Math.abs(touchEndTime-touchStartTime),settings.fullWidth||touchSpeed<340)currentX<startX?goToSlide($el,"next"):currentX>startX&&goToSlide($el,"previous");else return newSlideIndex=getClosestSlide($el),goToSlide($el,newSlideIndex),!1;else $inner.css(buildAnimation(innerLeftPos+change,{},settings));change=0;currentX=0;currentY=0;currentXDistance=0;currentYDistance=0;startX=0;startY=0})}function addEvents($el){var settings=$el.data("carousel"),elMatchingIdAttr='[data-carousel-id="'+$el.attr("id")+'"]',winWidth=$(window).width(),winHeight=$(window).height(),winNewWidth,winNewHeight,firstResize=!0;$(window).on("resize.carousel."+$el.attr("id"),function(){winNewWidth=$(window).width();winNewHeight=$(window).height();(winWidth!==winNewWidth||winHeight!==winNewHeight)&&(settings.autoscroll&&$el.hasClass("carouselPlaying")&&firstResize===!0&&(pauseAutoscroll($el),firstResize=!1),clearTimeout($el.data("carousel-resize-timer"+$el.attr("id"))),$el.data("carousel-resize-timer"+$el.attr("id"),setTimeout(function(){setPositions($el);goToSlide($el,$el.data("$currentSlide").index(),!0);settings.autoscroll&&$el.hasClass("carouselPaused")&&playAutoscroll($el);firstResize=!0},400)));winWidth=winNewWidth;winHeight=winNewHeight});if(settings.autoscroll)$el.on("mouseover.carousel",function(){$el.hasClass("carouselPlaying")&&pauseAutoscroll($el)}).on("mouseleave.carousel",function(){$el.hasClass("carouselPaused")&&playAutoscroll($el)});Carousel.isTouchDevice&&addTouchEvents($el);$el.find(".carouselNextBtn").attr("data-carousel-slide","next");$el.find(".carouselPreviousBtn").attr("data-carousel-slide","previous");$el.find("[data-carousel-slide]").attr("data-carousel-id",$el.attr("id"));bindControls($el,elMatchingIdAttr)}function bindControls($el,$controls,isCustomControls){var settings=$el.data("carousel");$($controls).each(function(){var $btn=$(this);if($btn.hasClass(settings.pausePlayBtnClass))if(settings.autoscroll){isCustomControls&&($("#"+$btn.attr("data-carousel-id")).hasClass("carouselPlaying")?$btn.addClass("iconPause").removeClass("iconPlay"):$btn.addClass("iconPlay").removeClass("iconPause"));$btn.on("click.carousel",function(){var $btns=$("."+settings.pausePlayBtnClass+'[data-carousel-id="'+$el.attr("id")+'"]');$btn.hasClass("iconPause")?($btns.removeClass("iconPause").addClass("iconPlay"),pauseAutoscroll($el,!0)):($btns.removeClass("iconPlay").addClass("iconPause"),$el.hasClass("carouselIsLastSlide")?goToSlide($el,0):goToSlide($el,$el.data("$currentSlide").index()+1),playAutoscroll($el))})}else return window.console&&console.warn("The carousel you are trying to bind a pause / play button to (#"+$el.attr("id")+") is not currently set to autoscroll. To make it autoscroll you will need to destroy and re-create it passing the 'autoscroll' setting."),!1;else $btn.on("click.carousel",function(){$el=$("#"+$btn.attr("data-carousel-id"));settings.autoscroll&&pauseAutoscroll($el,!0);goToSlide($el,$btn.attr("data-carousel-slide"))})})}function destroyCarousel($el){var settings=$el.data("carousel"),$slides=$el.data("$carouselSlides"),elMatchingIdAttr='[data-carousel-id="'+$el.attr("id")+'"]',$defaultControls=$el.find(".carouselControlsDefault");settings.autoscroll&&pauseAutoscroll($el,!0);$(elMatchingIdAttr).removeClass("active").addClass("disabled").attr("disabled","disabled").off(".carousel");$(window).off("resize.carousel."+$el.attr("id"));clearTimeout($el.data("carousel-resize-timer"+$el.attr("id")));$defaultControls.remove();$slides.removeData("carousel-position carousel-loaded");$el.removeClass(settings.activeSlideClass+" carouselAutoscroll carouselPlaying carouselPaused carouselIsFirstSlide carouselIsLastSlide").removeAttr("style").removeData("carousel $carouselInner $carouselSlides $currentSlide $carouselGoToSlideBtns $lastSlide carousel-timer carousel-prev-next-loaded carousel-pagination-loaded carousel-pause-play-loaded").off(".carousel")}function init($el,settings){var $inner,$slides,firstSlideIndex,elMatchingIdAttr='[data-carousel-id="'+$el.attr("id")+'"]',transitionType;if(settings=$el.data("carousel",$.extend({},Carousel.defaults,settings)).data("carousel"),settings.useTransforms=!!settings.fullWidth&&!settings.showPreviews,firstSlideIndex=settings.firstSlide-1,!$el.find(".carouselInner").length)if($el.find("ul").length)$el.find("ul").addClass("carouselInner").find("li").addClass("carouselSlide");else return window.console&&console.warn("There is no .carouselInner element inside of #"+$el.attr("id")+". Please make sure your markup is correct."),!1;$el.addClass("carousel").data("$carouselInner",$el.find(".carouselInner")).data("$carouselSlides",$el.find(".carouselSlide"));$inner=$el.data("$carouselInner");$slides=$el.data("$carouselSlides");$el.data("$currentSlide",$slides.eq(firstSlideIndex));$(".ie8").length&&$slides.eq(-1).addClass("carouselSlideLast");settings.fullWidth?($el.addClass("carouselFullWidth"),settings.slidesPerScroll=1,settings.carouselHeight==="varied"&&$el.addClass("carouselVariedHeight")):settings.carouselHeight==="varied"&&(settings.carouselHeight="auto");settings.showPreviews&&$el.addClass("carouselWithPreview");$(elMatchingIdAttr).removeAttr("disabled").removeClass("disabled "+settings.disabledBtnClass);transitionType=settings.useTransforms?"transform ":"left ";settings.innerTransition=transitionType+settings.scrollTime+"ms, height "+settings.scrollTime+"ms";$inner.css({"-webkit-transition":settings.innerTransition,transition:settings.innerTransition});setTimeout(function(){addControlsHtml($el);setPositions($el);addEvents($el);$el.removeClass("loading");goToSlide($el,firstSlideIndex,!0);settings.autoscroll&&(settings.playOnLoad?playAutoscroll($el):pauseAutoscroll($el,!0))},600)}var Carousel={},version=2,doubleIncluded=!!$.carousel;if(doubleIncluded){if($.carousel.version===version){window.console&&console.warn("ERROR: You are including carousel.js multiple times");return}if(window.console&&console.warn("ERROR: You are including multiple versions of carousel.js"),$.carousel.version>version)return}Carousel.defaults={fullWidth:!0,showPreviews:!1,carouselHeight:"auto",firstSlide:1,slidesPerScroll:"page",continuous:!1,infinite:!1,pagination:null,showPrevNextBtns:!0,showPausePlayBtns:!1,autoscroll:0,scrollTime:400,playOnLoad:!0,pausePlayBtnClass:"carouselPausePlayBtn",activeSlideClass:"carouselActiveSlide",activeBtnClass:"active",disabledBtnClass:"disabled",onSlideStart:!1,onSlideEnd:!1,onSlideLoad:!1,onSlideChange:!1,onAfterSlideChange:!1};Carousel.isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;Carousel.isIpad=navigator.userAgent.match(/iPad/i)!==null;$.fn.carousel=function(options,params){return this.each(function(){var $this=$(this);$this.attr("id")||$this.attr("id","carousel-"+(new Date).getTime()+Math.ceil(Math.random()*1e4));options==="next"?goToSlide($this,"next"):options==="prev"||options==="previous"?goToSlide($this,"previous"):options==="goToSlide"?isNaN(params)?goToSlide($this,params):goToSlide($this,params-1):options==="stop"&&$this.data("carousel").autoscroll?pauseAutoscroll($this,!0):options==="play"&&$this.data("carousel").autoscroll?playAutoscroll($this):options==="fixDimensions"||options==="setPositions"?setPositions($this):options==="bindControls"?bindControls($this,params,!0):options==="destroy"?destroyCarousel($this):$this.data("carousel")||init($(this),options)})};$(function(){Carousel.isTouchDevice?$("html").addClass("touch"):$("html").addClass("noTouch")});$.carousel={version:version}})(jQuery)